@page "/"

<h1>Simple Anniversary Calendar</h1>

<div class="calendar">
    <div class="header">
        <button @onclick="ShowPreviousMonth">&lt;</button>
        <h2>@currentMonth.ToString("MMMM yyyy")</h2>
        <button @onclick="ShowNextMonth">&gt;</button>
    </div>

    <table>
        <thead>
            <tr>
                @foreach (var dayOfWeek in Enumerable.Range(0, 7).Select(i => startDate.AddDays(i)))
                {
                    <th>@dayOfWeek.ToString("ddd")</th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var week in calendarWeeks)
            {
                <tr>
                    @foreach (var day in week)
                    {
                        <td>
                            @if (day != DateTime.MinValue)
                            {
                                <div class="day">
                                    <span>@day.Day</span>
                                    <ul>
                                        @foreach (var anniversary in GetAnniversariesForDay(day))
                                        {
                                            <li>@anniversary</li>
                                        }
                                    </ul>
                                </div>
                            }
                        </td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div>

@code {
    private DateTime currentMonth = DateTime.Today;
    private DateTime startDate;
    private List<List<DateTime>> calendarWeeks = new List<List<DateTime>>();

    private Dictionary<string, string> danishAnniversaries = new Dictionary<string, string>
        {
            ["Databeskyttelsesdagen"] = "28. januar",
            ["Kvindernes internationale kampdag"] = "8. marts",
            ["Arbejdernes internationale kampdag"] = "1. maj",
            ["Danmarks befrielse"] = "5. maj",
            ["Mors dag (anden sÃ¸ndag i maj)"] = "9. maj",
            // Add more anniversaries here
        };

    private List<string> GetAnniversariesForDay(DateTime day)
    {
        return danishAnniversaries
            .Where(a => a.Key.ToLowerInvariant().Contains(day.ToString("MMMM").ToLowerInvariant()))
            .Select(a => a.Value)
            .ToList();
    }

    private void ShowPreviousMonth()
    {
        currentMonth = currentMonth.AddMonths(-1);
        GenerateCalendar();
    }

    private void ShowNextMonth()
    {
        currentMonth = currentMonth.AddMonths(1);
        GenerateCalendar();
    }

    private void GenerateCalendar()
    {
        startDate = new DateTime(currentMonth.Year, currentMonth.Month, 1);
        var endDate = startDate.AddMonths(1).AddDays(-1);
        calendarWeeks = new List<List<DateTime>>();

        var currentDay = startDate;
        var currentWeek = new List<DateTime>();
        while (currentDay <= endDate)
        {
            currentWeek.Add(currentDay);
            if (currentDay.DayOfWeek == DayOfWeek.Saturday)
            {
                calendarWeeks.Add(currentWeek);
                currentWeek = new List<DateTime>();
            }
            currentDay = currentDay.AddDays(1);
        }

        if (currentWeek.Any())
        {
            calendarWeeks.Add(currentWeek);
        }
    }
}

<style>
    .calendar {
        text-align: center;
        font-size: 16px;
        margin-top: 20px;
    }

    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    table {
        border-collapse: collapse;
        width: 100%;
    }

    th, td {
        border: 1px solid #ccc;
        padding: 8px;
    }

    th {
        background-color: #f2f2f2;
    }

    .day {
        position: relative;
    }

        .day span {
            font-weight: bold;
        }

    ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    li {
        font-size: 14px;
        margin-top: 2px;
    }
</style>
